include(CheckCSourceRuns)

function(py_check_c_source_runs FILE RETVAL)
    message(STATUS "Compiling ${FILE}")
    file(READ "cmake/${FILE}" _CODE)
    check_c_source_runs("${_CODE}" RUN_OK)
    message(STATUS "- ${RETVAL}=${RUN_OK}")
    set(${RETVAL} ${RUN_OK} PARENT_SCOPE)
endfunction()

function(py_check_c_source_fails FILE RETVAL)
    message(STATUS "Compiling ${FILE}")
    file(READ "cmake/${FILE}" _CODE)
    check_c_source_runs("${_CODE}" RUN_OK)
    message(STATUS "- ${RETVAL}=${RUN_OK}")
    if(RUN_OK)
        set(${RETVAL} 0 PARENT_SCOPE)
    else()
        set(${RETVAL} 1 PARENT_SCOPE)
    endif()
endfunction()
